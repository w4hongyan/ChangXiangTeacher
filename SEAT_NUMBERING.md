# 座位编号模式说明

本系统提供了四种座位编号模式和两种编号方向，以适应不同的教室管理需求。

## 编号方向

### 从上开始 (top)
- 编号从教室前排（第一行）开始
- 适用于传统教室布局，教师在前方授课

### 从下开始 (bottom)
- 编号从教室后排（最后一行）开始
- 适用于教室门在后方，或希望后排学生优先的情况

## 编号模式详解

## 1. 行列式编号 (row-column)
**格式**: `行号-列号`

**从上开始示例**:
```
1-1  1-2  1-3  1-4
2-1  2-2  2-3  2-4
3-1  3-2  3-3  3-4
```

**从下开始示例**:
```
3-1  3-2  3-3  3-4
2-1  2-2  2-3  2-4
1-1  1-2  1-3  1-4
```

**适用场景**: 传统的座位管理，便于快速定位座位位置。

## 2. S形编号 (s-shape)
**格式**: 连续数字编号
**路径**: 奇数行从左到右，偶数行从右到左

**从上开始示例**:
```
1    2    3    4
8    7    6    5
9    10   11   12
```

**从下开始示例**:
```
12   11   10   9
5    6    7    8
4    3    2    1
```

**适用场景**: 适合按成绩或其他连续标准排座，确保相邻编号的学生在物理位置上也相邻。

## 3. Z形编号 (z-shape)
**格式**: 连续数字编号
**路径**: 每行都从左到右，逐行递增

**从上开始示例**:
```
1    2    3    4
5    6    7    8
9    10   11   12
```

**从下开始示例**:
```
9    10   11   12
5    6    7    8
1    2    3    4
```

**适用场景**: 简单的连续编号，便于按顺序安排学生入座。

## 4. 靠近讲台的S形编号 (podium-s)
**格式**: 连续数字编号
**路径**: 从靠近讲台的一侧开始，在横向布局中讲台在右侧

**从上开始示例** (从右侧靠讲台开始):
```
4    3    2    1
5    6    7    8
12   11   10   9
```

**从下开始示例** (确保1号在最下行靠讲台侧):
```
9    10   11   12
8    7    6    5
4    3    2    1
```

**适用场景**: 让优先级高的学生（如成绩优秀、需要特别关注的学生）坐在靠近讲台的位置。

## 技术实现

### 算法说明
- **行列式**: 直接使用行号和列号组合
- **S形**: 奇偶行交替方向遍历
- **Z形**: 按行从左到右顺序遍历
- **靠台S形**: 考虑讲台位置，从靠近讲台侧开始的S形遍历

### 特殊处理
- 只对类型为 `seat` 的位置进行编号
- 跳过 `aisle`（过道）、`podium`（讲台）、`empty`（空白）类型的位置
- 编号从 1 开始，连续递增

### 响应式更新
- 编号模式切换后立即更新所有座位显示
- 支持实时预览不同编号模式的效果
- 在座位布局设计器和分配界面中保持一致

## 自动分配功能

系统支持智能的自动座位分配功能，会根据当前选择的编号模式和方向进行座位分配。

### 分配原则

1. **智能编号排序**: 总是按照当前选择的编号模式和方向进行排序，从1号座位开始分配
2. **使用保存设置**: 如果没有手动选择编号模式，自动使用设计布局时保存的编号设置
3. **学生排序**: 学生按姓名拼音排序，确保分配的一致性
4. **顺序匹配**: 第1号座位分配给第1个学生，第2号座位分配给第2个学生，以此类推
5. **智能适配**: 只对类型为 `seat` 的位置进行分配，自动跳过过道、讲台等区域

### 使用方法

1. 在分配学生界面中选择编号模式和方向（或使用保存的设置）
2. 点击“自动分配”按钮
3. 系统会清空现有分配，并按新的规则从1号座位开始重新分配所有学生

### 示例

如果选择“靠台S形，从下开始”：
- 1号座位（最下一行靠近讲台）将分配给第1个学生
- 2号座位将分配给第2个学生
- 以此类推，确保优先级高的学生坐在靠近讲台的位置

## 使用方法

1. **在排位管理界面**：
   - 选择班级和设置布局后
   - 在分配学生页面的顶部选择编号模式
   - 选择编号方向（从上开始或从下开始）
   - 座位编号会立即更新显示

2. **在布局设计器中**：
   - 设计座位布局时可预览不同编号模式
   - 配置表单中选择编号模式和方向
   - 实时查看编号效果

## 注意事项

- 编号模式和方向的选择不会影响座位布局的存储，只影响显示
- 不同编号模式下，实际的座位坐标（行列位置）保持不变
- 建议根据班级管理需求和教室实际情况选择合适的编号模式和方向
- “从下开始”模式适合教室门在后方或希望后排学生优先的情况
- 编号方向与编号模式可以组合使用，提供更灵活的座位管理方案